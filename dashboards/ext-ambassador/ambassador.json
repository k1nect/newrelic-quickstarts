{
  "name": "Ambassador Dashboard",
  "description": null,
  "pages": [
    {
      "name": "Ambassador Dashboard",
      "description": null,
      "widgets": [
        {
          "title": "",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 3,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "\n# ![Ambassador Logo](https://www.getambassador.io/images/ambassador-logo.jpeg)"
          }
        },
        {
          "title": "eConf Duration",
          "layout": {
            "column": 4,
            "row": 1,
            "width": 3,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(ambassador_econf_time_seconds) FROM Metric FACET instance TIMESERIES AUTO"
              }
            ]
          }
        },
        {
          "title": "Aconf Duration",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 3,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(ambassador_aconf_time_seconds) FROM Metric FACET instance TIMESERIES AUTO"
              }
            ]
          }
        },
        {
          "title": "Fetcher Duration",
          "layout": {
            "column": 10,
            "row": 1,
            "width": 3,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(ambassador_fetcher_time_seconds) FROM Metric FACET instance TIMESERIES AUTO"
              }
            ]
          }
        },
        {
          "title": "Registered Services",
          "layout": {
            "column": 1,
            "row": 4,
            "width": 1,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(envoy_cluster_manager_active_clusters) as 'Services' FROM Metric where endpoint='ambassador-admin' LIMIT 100"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "Reconfiguration Duration",
          "layout": {
            "column": 2,
            "row": 4,
            "width": 3,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(ambassador_reconfiguration_time_seconds) FROM Metric FACET instance TIMESERIES AUTO"
              }
            ]
          }
        },
        {
          "title": "IR Duration",
          "layout": {
            "column": 5,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(ambassador_ir_time_seconds) FROM Metric FACET instance TIMESERIES AUTO"
              }
            ]
          }
        },
        {
          "title": "Diagnostics Duration",
          "layout": {
            "column": 9,
            "row": 4,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(ambassador_diagnostics_time_seconds) FROM Metric FACET instance TIMESERIES AUTO"
              }
            ]
          }
        },
        {
          "title": "API Return Code (Avg)",
          "layout": {
            "column": 1,
            "row": 7,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT average(envoy_http_downstream_rq_xx) as '2XX' FROM Metric  WHERE envoy_response_code_class IN (2, '2') and endpoint = 'ambassador-admin' TIMESERIES AUTO "
              },
              {
                "accountId": 0,
                "query": "SELECT average(envoy_http_downstream_rq_xx) as '3XX' FROM Metric  WHERE envoy_response_code_class IN (3, '3') and endpoint = 'ambassador-admin' TIMESERIES AUTO"
              },
              {
                "accountId": 0,
                "query": "SELECT average(envoy_http_downstream_rq_xx) as '4XX' FROM Metric  WHERE envoy_response_code_class IN (4, '4') and endpoint = 'ambassador-admin' TIMESERIES AUTO"
              },
              {
                "accountId": 0,
                "query": "SELECT average(envoy_http_downstream_rq_xx) as '5XX' FROM Metric  WHERE envoy_response_code_class IN (5, '5') and endpoint = 'ambassador-admin' TIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Downstream Connections Length",
          "layout": {
            "column": 5,
            "row": 7,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT rate(sum(envoy_http_downstream_cx_length_ms_bucket), 5 minute) FROM Metric where endpoint ='ambassador-admin' FACET instance TIMESERIES  auto"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Active Connections",
          "layout": {
            "column": 9,
            "row": 7,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(envoy_http_downstream_cx_http1_active) FROM Metric where endpoint ='ambassador-admin' FACET instance TIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        }
      ]
    }
  ]
}